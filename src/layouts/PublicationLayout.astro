---
const { title } = Astro.props;
import TopNav from "@components/TopNav.astro";
import "../assets/styles/typography.css";
import "../assets/styles/reading.css";
---
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>{title}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
</head>

<body>
    <button class="theme-toggle" type="button">Theme</button>
    <script>
    const root = document.documentElement;

    const saved = localStorage.getItem("theme");
    if (saved) root.dataset.theme = saved;

    // If no saved theme, follow system
    if (!saved) {
        const prefersDark = matchMedia("(prefers-color-scheme: dark)").matches;
        root.dataset.theme = prefersDark ? "dark" : "light";
    }

    document.querySelector(".theme-toggle") ? .addEventListener("click", () => {
        const next = root.dataset.theme === "dark" ? "light" : "dark";
        root.dataset.theme = next;
        localStorage.setItem("theme", next);
    });
    </script>
    <style>
    .theme-toggle {
        position: fixed;
        top: 1rem;
        right: 1rem;
        border-radius: 999px;
        padding: .55rem .85rem;
        border: 1px solid var(--border);
        background: var(--surface);
        color: var(--fg);
    }
    </style>
    <div class="app">
        <TopNav appName="Intellectual OS" />
        <main class="reading-container">
            <slot />
        </main>
    </div>
</body>

</html>
<style>
:root {
    --measure: 68ch;
}
</style>